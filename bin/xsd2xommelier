#!/usr/bin/env ruby

require 'xommelier/builder'

schema_path = ARGV[0]
ruby_path = ARGV[1] || schema_path.gsub(/\.xsd$/, '.rb')
schema_file = open(schema_path, 'r')

@schema = Xommelier::Builder.new(schema_file)
File.open(ruby_path, 'w') do |f|
  ruby_code = @schema.to_ruby
  f.puts(ruby_code)
end
$stderr.puts @schema.errors.to_a
